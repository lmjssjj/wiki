# ViewRootImpl

mAttachInfo.mThreadedRenderer 初始化

```
setView->enableHardwareAcceleration->ThreadedRenderer.create
```

绘制

```
doTraversal
->performTraversals
->performMeasure performLayout performDraw
->draw(fullRedrawNeeded) mAttachInfo.mTreeObserver.dispatchOnDraw();
->mAttachInfo.mThreadedRenderer.draw(mView, mAttachInfo, this);
->updateRootDisplayList
	canvas.translate(mInsetLeft, mInsetTop);
    callbacks.onPreDraw(canvas);
    callbacks.onPostDraw(canvas);
	->onPreDraw(RecordingCanvas canvas) { 
        if (mCurScrollY != 0 && mHardwareYOffset != 0 && mAttachInfo.mThreadedRenderer.isOpaque()) {
            canvas.drawColor(Color.BLACK);
        }
        canvas.translate(-mHardwareXOffset, -mHardwareYOffset);
    }
->onPostDraw
	drawAccessibilityFocusedDrawableIfNeeded
	onPostDraw()
	
com.android.internal.policy.DecorView.onPostDraw(RecordingCanvas)

	->drawResizingShadowIfNeeded(canvas);
      drawLegacyNavigationBarBackground(canvas);
      ->drawResizingShadowIfNeeded
      	canvas.save();
        canvas.translate(0, getHeight() - mFrameOffsets.bottom);
        canvas.drawRect(0, 0, getWidth(), mResizeShadowSize, mHorizontalResizeShadowPaint);
        canvas.restore();
        canvas.save();
        canvas.translate(getWidth() - mFrameOffsets.right, 0);
        canvas.drawRect(0, 0, mResizeShadowSize, getHeight(), mVerticalResizeShadowPaint);
        canvas.restore();
       ->drawLegacyNavigationBarBackground
       	canvas.drawRect(v.getLeft(), v.getTop(), v.getRight(), v.getBottom(),
                mLegacyNavigationBarBackgroundPaint);
                
android.view.ThreadedRenderer.draw(View, AttachInfo, DrawCallbacks)
->drawSoftware mView.draw(canvas);

```

